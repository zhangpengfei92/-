<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jcl.dao.SubzhMapper">
  <resultMap id="BaseResultMap" type="com.jcl.pojo.Subzh">
    <id column="subzh" jdbcType="VARCHAR" property="subzh" />
    <id column="cookie" jdbcType="VARCHAR" property="cookie" />
    <result column="password" jdbcType="VARCHAR" property="password" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="pagentzh" jdbcType="VARCHAR" property="pagentzh" />
    <result column="is_delete" jdbcType="INTEGER" property="isDelete" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="khdate" jdbcType="TIMESTAMP" property="khdate" />
    <result column="marginset" jdbcType="VARCHAR" property="marginset" />
    <result column="feeset" jdbcType="VARCHAR" property="feeset" />
    <result column="riskset" jdbcType="INTEGER" property="riskset" />
    <result column="openright" jdbcType="INTEGER" property="openright" />
    <result column="accounttype" jdbcType="INTEGER" property="accounttype" />
    <result column="qq" jdbcType="VARCHAR" property="qq" />
    <result column="mail" jdbcType="VARCHAR" property="mail" />
    <result column="initmoney" jdbcType="DECIMAL" property="initmoney" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="note" jdbcType="VARCHAR" property="note" />
    <result column="bz" jdbcType="VARCHAR" property="bz" />
    <result column="userid" jdbcType="NUMERIC" property="userid" />
    <result column="headPicture" jdbcType="VARCHAR" property="headpicture" />
    <result column="loginname" jdbcType="VARCHAR" property="loginname" />
    <result column="notetel" jdbcType="VARCHAR" property="notetel" />
    <result column="risktype" jdbcType="INTEGER" property="risktype" />
    <result column="accountpattern" jdbcType="INTEGER" property="accountpattern" />
    <result column="zijinaccount" jdbcType="INTEGER" property="zijinaccount" />
    <result column="jypz" jdbcType="VARCHAR" property="jypz" />
    <result column="bdtd" jdbcType="VARCHAR" property="bdtd" />
    <result column="bzj" jdbcType="DECIMAL" property="bzj" />
    <result column="rzj" jdbcType="DECIMAL" property="rzj" />
    <result column="yjx" jdbcType="DECIMAL" property="yjx" />
    <result column="pcx" jdbcType="DECIMAL" property="pcx" />
    <result column="xzj" jdbcType="DECIMAL" property="xzj" />
    <result column="ccbl" jdbcType="INTEGER" property="ccbl" />
    <result column="isadmin" jdbcType="INTEGER" property="isadmin" />
    <result column="jyright" jdbcType="VARCHAR" property="jyright" />
    <result column="riskstate" jdbcType="INTEGER" property="riskstate" />
    <result column="mncj" jdbcType="INTEGER" property="mncj" />
    <result column="riskHolderId" jdbcType="VARCHAR" property="riskholderid" />
    <result column="total_defer" jdbcType="NUMERIC" property="totalDefer" />
    <result column="fundBalance" jdbcType="NUMERIC" property="fundbalance" />
    <result column="zhstate" jdbcType="INTEGER" property="zhstate" />
    <result column="allocagent" jdbcType="VARCHAR" property="allocagent" />
    <result column="allocbroker" jdbcType="VARCHAR" property="allocbroker" />
    <result column="allocchannel" jdbcType="VARCHAR" property="allocchannel" />
    <result column="allocpt" jdbcType="VARCHAR" property="allocpt" />
    <result column="manage" jdbcType="VARCHAR" property="manage" />
     <result column="bank" jdbcType="VARCHAR" property="bank" />
    <result column="bank_card" jdbcType="VARCHAR" property="bankCard" />
    <result column="id_no" jdbcType="VARCHAR" property="idNo" />
    <result column="front_pic" jdbcType="VARCHAR" property="frontPic" />
    <result column="back_pic" jdbcType="VARCHAR" property="backPic" />
    <result column="card_pic" jdbcType="VARCHAR" property="cardPic" />
    <result column="invite_code" jdbcType="VARCHAR" property="inviteCode" />
   	<result column="auth_state" jdbcType="INTEGER" property="authState" />
  </resultMap>
  
  <resultMap id="ResultMap2" type="com.jcl.pojo.Subzh">
    <id column="subzh" jdbcType="VARCHAR" property="subzh" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="pagentzh" jdbcType="VARCHAR" property="pagentzh" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="khdate" jdbcType="TIMESTAMP" property="khdate" />
    <result column="marginset" jdbcType="VARCHAR" property="marginset" />
    <result column="feeset" jdbcType="VARCHAR" property="feeset" />
    <result column="riskset" jdbcType="INTEGER" property="riskset" />
    <result column="openright" jdbcType="INTEGER" property="openright" />
    <result column="accounttype" jdbcType="INTEGER" property="accounttype" />
    <result column="initmoney" jdbcType="DECIMAL" property="initmoney" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="bz" jdbcType="VARCHAR" property="bz" />
    <result column="userid" jdbcType="NUMERIC" property="userid" />
    <result column="headPicture" jdbcType="VARCHAR" property="headpicture" />
    <result column="risktype" jdbcType="INTEGER" property="risktype" />
    <result column="accountpattern" jdbcType="INTEGER" property="accountpattern" />
    <result column="zijinaccount" jdbcType="INTEGER" property="zijinaccount" />
    <result column="jypz" jdbcType="VARCHAR" property="jypz" />
    <result column="bdtd" jdbcType="VARCHAR" property="bdtd" />
    <result column="bzj" jdbcType="DECIMAL" property="bzj" />
    <result column="rzj" jdbcType="DECIMAL" property="rzj" />
    <result column="yjx" jdbcType="DECIMAL" property="yjx" />
    <result column="pcx" jdbcType="DECIMAL" property="pcx" />
    <result column="xzj" jdbcType="DECIMAL" property="xzj" />
    <result column="ccbl" jdbcType="INTEGER" property="ccbl" />
    <result column="isadmin" jdbcType="INTEGER" property="isadmin" />
    <result column="jyright" jdbcType="VARCHAR" property="jyright" />
    <result column="riskstate" jdbcType="INTEGER" property="riskstate" />
    <result column="mncj" jdbcType="INTEGER" property="mncj" />
    <result column="riskHolderId" jdbcType="VARCHAR" property="riskholderid" />
    <!-- <result column="total_defer" jdbcType="NUMERIC" property="totalDefer" /> -->
    <result column="fundBalance" jdbcType="NUMERIC" property="fundbalance" />
    <result column="zhstate" jdbcType="INTEGER" property="zhstate" />
    <result column="allocbroker" jdbcType="VARCHAR" property="allocbroker" />
    <result column="allocagent" jdbcType="VARCHAR" property="allocagent" />
    <result column="allocpt" jdbcType="VARCHAR" property="allocpt" />
    <result column="allocchannel" jdbcType="VARCHAR" property="allocchannel" />
    <result column="manage" jdbcType="VARCHAR" property="manage" />
    <result column="coefficient" jdbcType="DECIMAL" property="coefficient" />
    <result column="marginName" jdbcType="VARCHAR" property="marginName" />
    <result column="feeName" jdbcType="VARCHAR" property="feeName" />
    <result column="riskName" jdbcType="VARCHAR" property="riskName" />
    <result column="bdtdName" jdbcType="VARCHAR" property="bdtdName" />
    <result column="agentname" jdbcType="VARCHAR" property="agentname" />
     <result column="bank" jdbcType="VARCHAR" property="bank" />
    <result column="bank_card" jdbcType="VARCHAR" property="bankCard" />
    <result column="id_no" jdbcType="VARCHAR" property="idNo" />
    <result column="front_pic" jdbcType="VARCHAR" property="frontPic" />
    <result column="back_pic" jdbcType="VARCHAR" property="backPic" />
    <result column="card_pic" jdbcType="VARCHAR" property="cardPic" />
    <result column="auth_state" jdbcType="INTEGER" property="authState" />
    <result column="invite_code" jdbcType="VARCHAR" property="inviteCode" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    subzh, cookie,password, name, is_delete, phone, khdate, marginset,pagentzh,
    feeset, riskset,openright, accounttype, qq, mail, initmoney, 
    address,note, bz, userid, headPicture,allocagent,allocpt, 
    loginname,notetel, risktype, accountpattern, zijinaccount, jypz, bdtd, 
    bzj, rzj, yjx, pcx, xzj, ccbl, isadmin, jyright, riskstate, mncj, riskHolderId, total_defer, 
    fundBalance, zhstate, allocbroker, allocchannel,manage,bank,bank_card,id_no,front_pic,back_pic,card_pic,auth_state,invite_code  
  </sql>
  <sql id="Base_Column_List2">
    subzh, cookie, name, is_delete, phone, khdate,pagentzh,
    feeset, riskset,isadmin,coefficient,allocagent,allocpt,
    fundBalance, zhstate, allocbroker, allocchannel,manage
  </sql>
  <!--查询角色及权限-->
<!--   <select id="selectByRoleAndPer" parameterType="java.lang.String" resultMap="BaseResultMap">
  		select * from subzh s left join subzh_role sr on sr.subzh=s.subzh 
		left join role r on r.lsh=sr.roleid
		left join role_permission rp on rp.rid = r.lsh left join  permission p  on p.p_id = rp.pid 
		where s.subzh=#{username};
  	
  </select> -->
  
   <!--查询角色及权限-->
	<select id="selectByRoleAndPer" parameterType="java.lang.String" resultType="com.jcl.pojo.PreMenu">
	 SELECT	 
	 	pm.id, pm.pre_id,
		pm.mname,
		pm.menu_code
	FROM
		pre_menu pm
	LEFT JOIN subzh_pre_menu spm ON spm.pmid = pm.id
	WHERE
		spm.subzh=#{username};
  	
 	 </select>
  
  	<!-- 查询机构和平台信息列表  由于前台显示的是分成百分比。所以这里乘以一个100-->
	<select id="getAgentzhPtList" resultType="com.jcl.pojo.Subzh" parameterType="java.lang.Integer">
		select subzh,cookie,isadmin,phone,coefficient*100 as coefficient,name from subzh where isadmin=#{isadmin}
	</select>
  
  <!--查询全部  -->
    <select id="selectAll" resultType="com.jcl.pojo.Subzh" parameterType="java.lang.String">
	SELECT 
			subzh.*, fee_scheme.schemeName,
			risk_tempall.type,
			bdzh.accountid,
			role.lsh
		FROM
			subzh
		LEFT JOIN fee_scheme  ON subzh.feeset = fee_scheme.lsh
		LEFT JOIN risk_tempall  ON subzh.riskset = risk_tempall.id
		LEFT JOIN bdzh  ON subzh.bdtd = bdzh.accountid
		LEFT JOIN subzh_role  on subzh_role.subzh=subzh.subzh 
		LEFT JOIN role on role.lsh=subzh_role.roleid 
		  <![CDATA[
              where subzh.subzh <> #{username}; 
          ]]>    
  </select>
  																   
  <select id="selectManage"  resultMap="ResultMap2" parameterType="java.lang.Integer">
  	select  <include refid="Base_Column_List" /> 
  	from subzh where isadmin=#{isadmin}
  </select>
  
  <!--条件查询  2渠道，3经纪人，代理商-->
  <select id="selectQdJjrUser" resultMap="ResultMap2" parameterType="com.jcl.pojo.Subzh">
  		select sub.subzh,sub.fundBalance,sub.name,sub.cookie,sub.phone,sub.coefficient*100 as coefficient,sub.allocchannel,sub.khdate,sub.allocagent,sub.allocpt,
  		sc.name as channelname,sub.allocbroker,sb.name as brokername,sub.isadmin,sub.jypz,dls.name as agentname,sub.manage,sub.invite_code 
  		from subzh sub left join subzh sb on sub.allocbroker=sb.subzh 
  		left join subzh dls on sub.allocagent=dls.subzh
  		left join subzh sc on sub.allocchannel=sc.subzh
  		where sub.isadmin=#{isadmin}
	 			<if test="subzh!=null and subzh!=''">
	 				and sub.subzh LIKE '%${subzh}%'
	 			</if>
	 			<if test="name!=null and name!=''">
	 				and sub.name LIKE '%${name}%'
	 			</if>
	 			<if test="allocbroker!=null and allocbroker!=''">
	 				and sub.allocbroker=#{allocbroker}
	 			</if>
	 			<if test="brokername!=null and brokername!=''">
	 				and sb.name=#{brokername}
	 			</if>
	 			<if test="allocagent!=null and allocagent!=''">
	 				and sub.allocagent=#{allocagent}
	 			</if>
	 			<if test="allocchannel!=null and allocchannel!=''">
	 				and sub.allocchannel=#{allocchannel}
	 			</if>
	 			<if test="channelname!=null and channelname!=''">
	 				and sc.name=#{channelname}
	 			</if>
	 			<if test="allocpt!=null and allocpt!=''">
	 				and sub.allocpt=#{allocpt}
	 			</if>
	 			<if test="manage!=null and manage!=''">
	 				and sub.manage=#{manage}
	 			</if>
	 			<if test="bdtd!=null and bdtd!=''">
	 				and sub.bdtd=#{bdtd}
	 			</if>
	 			and (sub.is_delete = 0 or sub.is_delete is null)
	 			order by sub.khdate desc
  
  </select>
  
  <!-- 查询交易用户，需要关联查出渠道名，代理商名，经纪人名，方案名，报单账号的。 -->
  <select id="selectTradeUser" resultMap="ResultMap2" parameterType="com.jcl.pojo.Subzh">
  		select sub.subzh,sub.fundBalance,sub.name,sub.cookie,sub.phone,sub.coefficient,sub.allocchannel,sub.khdate,sub.zhstate,sub.allocagent,
  		sc.name as channelname,sub.allocbroker,sb.name as brokername,sub.isadmin,sub.bdtd,sub.jypz,dls.name as agentname,sub.manage,
  		sub.allocpt,sub.auth_state,fs.title as feeName,rt.type as riskName,bdzh.accountid as bdtdName,bzjmb.title as marginName  
  		
  		from subzh sub left join subzh sb on sub.allocbroker=sb.subzh 
  		left join subzh dls on sub.allocagent=dls.subzh
  		left join subzh sc on sub.allocchannel=sc.subzh
  		LEFT JOIN codefeeset_menu fs ON sub.feeset = fs.id
		LEFT JOIN risk_tempall rt ON sub.riskset = rt.id
		LEFT JOIN bdzh bdzh ON sub.bdtd = bdzh.bdzhid
		LEFT JOIN bzjmb_menu bzjmb ON sub.marginset = bzjmb.id
  		where sub.isadmin=#{isadmin}
	 			<if test="subzh!=null and subzh!=''">
	 				and sub.subzh LIKE '%${subzh}%'
	 			</if>
	 			<if test="name!=null and name!=''">
	 				and sub.name LIKE '%${name}%'
	 			</if>
	 			<if test="allocbroker!=null and allocbroker!=''">
	 				and sub.allocbroker=#{allocbroker}
	 			</if>
	 			<if test="brokername!=null and brokername!=''">
	 				and sb.name=#{brokername}
	 			</if>
	 			<if test="allocagent!=null and allocagent!=''">
	 				and sub.allocagent=#{allocagent}
	 			</if>
	 			<if test="allocchannel!=null and allocchannel!=''">
	 				and sub.allocchannel=#{allocchannel}
	 			</if>
	 			<if test="channelname!=null and channelname!=''">
	 				and sc.name=#{channelname}
	 			</if>
	 			<if test="allocpt!=null and allocpt!=''">
	 				and sub.allocpt=#{allocpt}
	 			</if>
	 			<if test="manage!=null and manage!=''">
	 				and sub.manage=#{manage}
	 			</if>
	 			<if test="bdtd!=null and bdtd!=''">
	 				and sub.bdtd=#{bdtd}
	 			</if>
	 			<if test="authState!=null and bdtd!=0">
	 				and sub.auth_state=#{authState}
	 			</if>
	 			
	 			and (sub.is_delete = 0 or sub.is_delete is null)
	 			order by sub.khdate desc
  </select>
  
  <!--交易管理 查询交易用户，需要关联查出渠道名，代理商名，经纪人名 -->
  <select id="getTradeUserList" resultMap="ResultMap2" parameterType="com.jcl.pojo.Subzh">
  		select sub.subzh,sub.name,sub.fundBalance,sub.cookie,sub.phone,sub.coefficient,sub.allocchannel,sub.khdate,sub.zhstate,sub.allocagent,
  		sc.name as channelname,sub.allocbroker,sb.name as brokername,sub.isadmin,sub.bdtd,sub.jypz,dls.name as agentname,sub.manage,
  		sub.allocpt
  		from subzh sub left join subzh sb on sub.allocbroker=sb.subzh 
  		left join subzh dls on sub.allocagent=dls.subzh
  		left join subzh sc on sub.allocchannel=sc.subzh
  		where sub.isadmin=#{isadmin}
	 			<if test="subzh!=null and subzh!=''">
	 				and sub.subzh =#{subzh}
	 			</if>
	 			<if test="allocbroker!=null and allocbroker!=''">
	 				and sub.allocbroker=#{allocbroker}
	 			</if>
	 			<if test="brokername!=null and brokername!=''">
	 				and sb.name=#{brokername}
	 			</if>
	 			<if test="allocagent!=null and allocagent!=''">
	 				and sub.allocagent=#{allocagent}
	 			</if>
	 			<if test="allocchannel!=null and allocchannel!=''">
	 				and sub.allocchannel=#{allocchannel}
	 			</if>
	 			<if test="allocpt!=null and allocpt!=''">
	 				and sub.allocpt=#{allocpt}
	 			</if>
	 			<if test="manage!=null and manage!=''">
	 				and sub.manage=#{manage}
	 			</if>
	 			and (sub.is_delete = 0 or sub.is_delete is null)
	 			order by sub.khdate desc
  </select>
  <!--交易管理 查询交易用户，需要关联查出渠道名，代理商名，经纪人名 -->
  <select id="getTradeUserOne" resultMap="ResultMap2" parameterType="com.jcl.pojo.Subzh">
  		select sub.subzh,sub.fundBalance,sub.name,sub.cookie,sub.phone,sub.coefficient,sub.allocchannel,sub.khdate,sub.zhstate,sub.allocagent,
  		sc.name as channelname,sub.allocbroker,sb.name as brokername,sub.isadmin,sub.bdtd,sub.jypz,dls.name as agentname,sub.manage,
  		sub.allocpt
  		from subzh sub left join subzh sb on sub.allocbroker=sb.subzh 
  		left join subzh dls on sub.allocagent=dls.subzh
  		left join subzh sc on sub.allocchannel=sc.subzh
  		where sub.subzh =#{subzh}
  </select>
  
  
  <select id="selectSubzhByPhone" resultType="com.jcl.pojo.Subzh">
  		select <include refid="Base_Column_List" />
   		from subzh where phone=#{phone} 
   		<if test="subzh!=null and subzh!=''">
   			<![CDATA[
              and subzh <>
          ]]> #{subzh}
   		</if>
   		and (is_delete = 0 or is_delete is null)
  </select>
  
  <!--条件查询  废弃-->
  <select id="selectByExample" parameterType="com.jcl.pojo.SubzhExample" resultType="com.jcl.pojo.Subzh">
    select
			subzh.*, fee_scheme.schemeName,
			risk_tempall.type,
			bdzh.accountid,
			role.lsh
		FROM
			subzh
		LEFT JOIN fee_scheme  ON subzh.feeset = fee_scheme.lsh
		LEFT JOIN risk_tempall  ON subzh.riskset = risk_tempall.id
		LEFT JOIN bdzh  ON subzh.bdtd = bdzh.accountid
		LEFT JOIN subzh_role  on subzh_role.subzh=subzh.subzh 
		LEFT JOIN role on role.lsh=subzh_role.roleid
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <!--模糊查询  -->
  <select id="selectByName" resultType="com.jcl.pojo.Subzh"  parameterType="com.jcl.vo.SubVo">
  		SELECT 
			subzh.*, fee_scheme.schemeName,
			risk_tempall.type,
			bdzh.accountid,
			role.lsh
		FROM
			subzh
		LEFT JOIN fee_scheme  ON subzh.feeset = fee_scheme.lsh
		LEFT JOIN risk_tempall  ON subzh.riskset = risk_tempall.id
		LEFT JOIN bdzh  ON subzh.bdtd = bdzh.accountid
		LEFT JOIN subzh_role  on subzh_role.subzh=subzh.subzh 
		LEFT JOIN role on role.lsh=subzh_role.roleid 
		where subzh.subzh like '%'+#{nickname}+'%'
		  <![CDATA[
              and subzh.subzh <> #{username}; 
          ]]>
  </select>
  
  <!--查询平台下所有渠道，查询渠道下所有经纪人，查询经纪人下所有普通用户  -->
  <select id="getSubzhLevelList" resultType="com.jcl.pojo.Subzh" parameterType="com.jcl.pojo.Subzh">
  	select <include refid="Base_Column_List2" /> from subzh
  	<where>
  		<if test="isadmin!=null">
  			and isadmin=#{isadmin,jdbcType=INTEGER}
  		</if>
  		<if test="manage!=null">
  			and manage=#{manage,jdbcType=VARCHAR}
  		</if>
  		<if test="allocbroker!=null">
  			and allocbroker=#{allocbroker,jdbcType=VARCHAR}
  		</if>
  		<if test="allocchannel!=null">
  			and allocchannel=#{allocchannel,jdbcType=VARCHAR}
  		</if>
  		<if test="allocagent!=null">
  			and allocagent=#{allocagent,jdbcType=VARCHAR}
  		</if>
  		<if test="allocpt!=null">
  			and allocpt=#{allocpt,jdbcType=VARCHAR}
  		</if>
  		and (is_delete = 0 or is_delete is null) order by khdate desc
  	</where>
  </select>
  
  <select id="getPuriSubzh" parameterType="java.lang.String" resultType="com.jcl.pojo.Subzh">
  	select
    	 sub.subzh,sub.cookie,sub.name,sub.isadmin,sub.phone,sub.allocbroker,sub.allocchannel,sub.allocagent,sub.manage,
    	 sub.password,sub.zhstate,sub.fundbalance
   		from subzh sub
		where sub.subzh=#{id}; 
  </select>
  
  <select id="loginBySubzh" parameterType="java.lang.String" resultType="com.jcl.pojo.Subzh">
  	 select
    	 <include refid="Base_Column_List" />
   		from subzh
		where subzh.subzh=#{id} 	
  </select>
  	
  <select id="selectBySubzh" parameterType="java.lang.String" resultType="com.jcl.pojo.Subzh">
  	 select sub.subzh,sub.name,sub.password,sub.cookie,sub.isadmin,sub.phone,sub.allocbroker,sub.allocchannel,sub.manage,sub.allocagent,sub.allocpt,
  	 	sub.feeset,sub.riskset,sub.bdtd,sub.coefficient,sub.jypz,sub.marginset,sub.initmoney,sub.zhstate,sub.fundbalance,sub.auth_state,
    	fs.title,
		rt.type,
		bdzh.accountid
   		from subzh sub
   		LEFT JOIN codefeeset_menu fs ON sub.feeset = fs.id
		LEFT JOIN risk_tempall rt ON sub.riskset = rt.id
		LEFT JOIN bdzh bdzh ON sub.bdtd = bdzh.bdzhid 
		where sub.subzh=#{id} and (sub.is_delete = 0 or sub.is_delete is null)
  </select>

  <select id="selectByPrimaryKey" parameterType="com.jcl.pojo.SubzhKey" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from subzh
    where subzh = #{subzh,jdbcType=VARCHAR}
      <if test="cookie!=null and cookie !=''">
    		and cookie = #{cookie,jdbcType=VARCHAR}
    </if>
  </select>
  
  <!-- 定时任务查询交易信息数据时，把用户对应的经纪人，代理商，渠道，平台都查出来放到mongodb中方便之后的查询 -->
  <select id="selectChannelBrokerBySubzh" parameterType="java.lang.String" resultType="com.jcl.pojo.Subzh">
  	 select sub.subzh,sub.name,sub.cookie,sub.isadmin,sub.phone,sub.allocbroker,sub.allocchannel,sub.manage,
  	 	sub.feeset,sub.riskset,sub.bdtd,sub.coefficient,sub.jypz,sub.marginset,sub.initmoney,sub.allocpt,sub.allocagent,
    	broker.name as brokername,agent.name as agentname,channel.name as channelname
   		from subzh sub
   		LEFT JOIN subzh broker ON sub.allocbroker = broker.subzh
   		LEFT JOIN subzh agent ON sub.allocagent = agent.subzh
		LEFT JOIN subzh channel ON sub.allocchannel = channel.subzh
		where sub.subzh=#{id}
  </select>
  
  <select id="checkNameExist" parameterType="com.jcl.pojo.Subzh" resultType="com.jcl.pojo.Subzh">
  	select subzh,cookie,name,phone from subzh where name=#{name}
  	<if test="subzh!=null and subzh !=''">
  		and subzh !=#{subzh}
  	</if>
  	<if test="isadmin!=null">
  		and isadmin =#{isadmin}
  	</if>
  
  </select>
  
	<!--   根据方案查询交易用户 -->
	<select id="getFanganSubzh" parameterType="com.jcl.pojo.Subzh" resultType="com.jcl.pojo.Subzh">
		select subzh,cookie,name,phone from subzh
		<where>
			<if test="marginset!=null">
				marginset = #{marginset}
			</if>
			<if test="feeset!=null">
				feeset=#{feeset}
			</if>
			<if test="riskset!=null">
				riskset=#{riskset}
			</if>
			<if test="bdtd!=null">
				bdtd=#{bdtd}
			</if>
		</where>
	</select>
  
  <delete id="deleteByPrimaryKey" parameterType="com.jcl.pojo.SubzhKey">
    delete from subzh
    where subzh = #{subzh,jdbcType=VARCHAR}
      and cookie = #{cookie,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.jcl.pojo.SubzhExample">
    delete from subzh
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.jcl.pojo.Subzh">
    insert into subzh (subzh, cookie,
      password, name, 
      is_delete, phone, khdate, 
      marginset, feeset, 
      riskset,  openright, 
      accounttype,
      qq, mail, initmoney, 
      address,note, 
      bz, userid, 
      headPicture, loginname,
      notetel, risktype, accountpattern, 
      zijinaccount, jypz, bdtd, 
      bzj, rzj, yjx, pcx, 
      xzj, ccbl, isadmin, 
      jyright, riskstate, mncj, 
      riskHolderId, total_defer,
      fundBalance, zhstate, allocbroker, 
      allocchannel, manage,pagentzh,allocagent,allocpt)
    values (#{subzh,jdbcType=VARCHAR}, #{cookie,jdbcType=VARCHAR}, 
       #{password,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, 
      #{isDelete,jdbcType=INTEGER}, #{phone,jdbcType=VARCHAR}, #{khdate,jdbcType=TIMESTAMP}, 
      #{marginset,jdbcType=VARCHAR}, #{feeset,jdbcType=VARCHAR}, 
      #{riskset,jdbcType=INTEGER}, #{openright,jdbcType=INTEGER}, 
      #{accounttype,jdbcType=INTEGER}, 
      #{qq,jdbcType=VARCHAR}, #{mail,jdbcType=VARCHAR}, #{initmoney,jdbcType=DECIMAL}, 
      #{address,jdbcType=VARCHAR}, #{note,jdbcType=VARCHAR}, 
      #{bz,jdbcType=VARCHAR}, #{userid,jdbcType=NUMERIC}, 
      #{headpicture,jdbcType=VARCHAR}, #{loginname,jdbcType=VARCHAR}, 
      #{notetel,jdbcType=VARCHAR}, #{risktype,jdbcType=INTEGER}, #{accountpattern,jdbcType=INTEGER}, 
      #{zijinaccount,jdbcType=INTEGER}, #{jypz,jdbcType=VARCHAR}, #{bdtd,jdbcType=VARCHAR}, 
      #{bzj,jdbcType=DECIMAL}, #{rzj,jdbcType=DECIMAL}, #{yjx,jdbcType=DECIMAL}, #{pcx,jdbcType=DECIMAL}, 
      #{xzj,jdbcType=DECIMAL}, #{ccbl,jdbcType=INTEGER}, #{isadmin,jdbcType=INTEGER}, 
      #{jyright,jdbcType=VARCHAR}, #{riskstate,jdbcType=INTEGER}, #{mncj,jdbcType=INTEGER}, 
      #{riskholderid,jdbcType=VARCHAR}, #{totalDefer,jdbcType=NUMERIC},
      #{fundbalance,jdbcType=NUMERIC}, #{zhstate,jdbcType=INTEGER}, #{allocbroker,jdbcType=VARCHAR}, 
      #{allocchannel,jdbcType=VARCHAR},#{manage,jdbcType=VARCHAR},#{pagentzh,jdbcType=VARCHAR},
      #{allocagent,jdbcType=VARCHAR},#{allocpt,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.jcl.pojo.Subzh">
    insert into subzh
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="subzh != null">
        subzh,
      </if>
      <if test="cookie != null">
        cookie,
      </if>
      <if test="password != null">
        password,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="pagentzh != null">
        pagentzh,
      </if>
      <if test="isDelete != null">
        is_delete,
      </if>
      <if test="phone != null">
        phone,
      </if>
      <if test="khdate != null">
        khdate,
      </if>
      <if test="marginset != null">
        marginset,
      </if>
      <if test="feeset != null">
        feeset,
      </if>
      <if test="riskset != null">
        riskset,
      </if>
      <if test="openright != null">
        openright,
      </if>
      <if test="accounttype != null">
        accounttype,
      </if>
      <if test="qq != null">
        qq,
      </if>
      <if test="mail != null">
        mail,
      </if>
      <if test="initmoney != null">
        initmoney,
      </if>
      <if test="address != null">
        address,
      </if>
      <if test="note != null">
        note,
      </if>
      <if test="bz != null">
        bz,
      </if>
      <if test="userid != null">
        userid,
      </if>
      <if test="headpicture != null">
        headPicture,
      </if>
      <if test="loginname != null">
        loginname,
      </if>
      <if test="notetel != null">
        notetel,
      </if>
      <if test="risktype != null">
        risktype,
      </if>
      <if test="accountpattern != null">
        accountpattern,
      </if>
      <if test="zijinaccount != null">
        zijinaccount,
      </if>
      <if test="jypz != null">
        jypz,
      </if>
      <if test="bdtd != null">
        bdtd,
      </if>
      <if test="bzj != null">
        bzj,
      </if>
      <if test="rzj != null">
        rzj,
      </if>
      <if test="yjx != null">
        yjx,
      </if>
      <if test="pcx != null">
        pcx,
      </if>
      <if test="xzj != null">
        xzj,
      </if>
      <if test="ccbl != null">
        ccbl,
      </if>
      <if test="isadmin != null">
        isadmin,
      </if>
      <if test="jyright != null">
        jyright,
      </if>
      <if test="riskstate != null">
        riskstate,
      </if>
      <if test="mncj != null">
        mncj,
      </if>
      <if test="riskholderid != null">
        riskHolderId,
      </if>
      <if test="totalDefer != null">
        total_defer,
      </if>
      <if test="fundbalance != null">
        fundBalance,
      </if>
      <if test="zhstate != null">
        zhstate,
      </if>
      <if test="allocbroker != null">
        allocbroker,
      </if>
      <if test="allocagent != null">
        allocagent,
      </if>
      <if test="allocchannel != null">
        allocchannel,
      </if>
      <if test="allocpt != null">
        allocpt,
      </if>
      <if test="manage != null">
        manage,
      </if>
      <if test="coefficient != null">
        coefficient,
      </if>
      <if test="bank != null">
        bank,
      </if>
      <if test="bankCard != null">
        bank_card,
      </if>
      <if test="idNo != null">
        id_no,
      </if>
      <if test="frontPic != null">
        front_pic,
      </if>
      <if test="backPic != null">
        back_pic,
      </if>
      <if test="cardPic != null">
        card_pic,
      </if>
      <if test="authState != null">
        auth_state,
      </if>
      <if test="inviteCode != null">
        invite_code,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="subzh != null">
        #{subzh,jdbcType=VARCHAR},
      </if>
      <if test="cookie != null">
        #{cookie,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="pagentzh != null">
        #{pagentzh,jdbcType=VARCHAR},
      </if>
      <if test="isDelete != null">
        #{isDelete,jdbcType=INTEGER},
      </if>
      <if test="phone != null">
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="khdate != null">
        #{khdate,jdbcType=TIMESTAMP},
      </if>
      <if test="marginset != null">
        #{marginset,jdbcType=VARCHAR},
      </if>
      <if test="feeset != null">
        #{feeset,jdbcType=VARCHAR},
      </if>
      <if test="riskset != null">
        #{riskset,jdbcType=INTEGER},
      </if>
      <if test="openright != null">
        #{openright,jdbcType=INTEGER},
      </if>
      <if test="accounttype != null">
        #{accounttype,jdbcType=INTEGER},
      </if>
      <if test="qq != null">
        #{qq,jdbcType=VARCHAR},
      </if>
      <if test="mail != null">
        #{mail,jdbcType=VARCHAR},
      </if>
      <if test="initmoney != null">
        #{initmoney,jdbcType=DECIMAL},
      </if>
      <if test="address != null">
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="note != null">
        #{note,jdbcType=VARCHAR},
      </if>
      <if test="bz != null">
        #{bz,jdbcType=VARCHAR},
      </if>
      <if test="userid != null">
        #{userid,jdbcType=NUMERIC},
      </if>
      <if test="headpicture != null">
        #{headpicture,jdbcType=VARCHAR},
      </if>
      <if test="loginname != null">
        #{loginname,jdbcType=VARCHAR},
      </if>
      <if test="notetel != null">
        #{notetel,jdbcType=VARCHAR},
      </if>
      <if test="risktype != null">
        #{risktype,jdbcType=INTEGER},
      </if>
      <if test="accountpattern != null">
        #{accountpattern,jdbcType=INTEGER},
      </if>
      <if test="zijinaccount != null">
        #{zijinaccount,jdbcType=INTEGER},
      </if>
      <if test="jypz != null">
        #{jypz,jdbcType=VARCHAR},
      </if>
      <if test="bdtd != null">
        #{bdtd,jdbcType=VARCHAR},
      </if>
      <if test="bzj != null">
        #{bzj,jdbcType=DECIMAL},
      </if>
      <if test="rzj != null">
        #{rzj,jdbcType=DECIMAL},
      </if>
      <if test="yjx != null">
        #{yjx,jdbcType=DECIMAL},
      </if>
      <if test="pcx != null">
        #{pcx,jdbcType=DECIMAL},
      </if>
      <if test="xzj != null">
        #{xzj,jdbcType=DECIMAL},
      </if>
      <if test="ccbl != null">
        #{ccbl,jdbcType=INTEGER},
      </if>
      <if test="isadmin != null">
        #{isadmin,jdbcType=INTEGER},
      </if>
      <if test="jyright != null">
        #{jyright,jdbcType=VARCHAR},
      </if>
      <if test="riskstate != null">
        #{riskstate,jdbcType=INTEGER},
      </if>
      <if test="mncj != null">
        #{mncj,jdbcType=INTEGER},
      </if>
      <if test="riskholderid != null">
        #{riskholderid,jdbcType=VARCHAR},
      </if>
      <if test="totalDefer != null">
        #{totalDefer,jdbcType=NUMERIC},
      </if>
      <if test="fundbalance != null">
        #{fundbalance,jdbcType=NUMERIC},
      </if>
      <if test="zhstate != null">
        #{zhstate,jdbcType=INTEGER},
      </if>
      <if test="allocbroker != null">
        #{allocbroker,jdbcType=VARCHAR},
      </if>
       <if test="allocagent != null">
        #{allocagent,jdbcType=VARCHAR},
      </if>
      <if test="allocchannel != null">
        #{allocchannel,jdbcType=VARCHAR},
      </if>
      <if test="allocpt != null">
        #{allocpt,jdbcType=VARCHAR},
      </if>
      <if test="manage != null">
        #{manage,jdbcType=VARCHAR},
      </if>
      <if test="coefficient != null">
        #{coefficient,jdbcType=NUMERIC},
      </if>
      
      <if test="bank != null">
        #{bank},
      </if>
      <if test="bankCard != null">
        #{bankCard},
      </if>
      <if test="idNo != null">
        #{idNo},
      </if>
      <if test="frontPic != null">
        #{frontPic},
      </if>
      <if test="backPic != null">
        #{backPic},
      </if>
      <if test="cardPic != null">
        #{cardPic},
      </if>
      <if test="authState != null">
        #{authState},
      </if>
      <if test="inviteCode != null">
        #{inviteCode},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.jcl.pojo.SubzhExample" resultType="java.lang.Long">
    select count(*) from subzh
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    update subzh
    <set>
      <if test="record.subzh != null">
        subzh = #{record.subzh,jdbcType=VARCHAR},
      </if>
      <if test="record.cookie != null">
        cookie = #{record.cookie,jdbcType=VARCHAR},
      </if>
      <if test="record.password != null">
        password = #{record.password,jdbcType=VARCHAR},
      </if>
      <if test="record.name != null">
        name = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.pagentzh != null">
        pagentzh = #{record.pagentzh,jdbcType=VARCHAR},
      </if>
      <if test="record.isDelete != null">
        is_delete = #{record.isDelete,jdbcType=INTEGER},
      </if>
      <if test="record.phone != null">
        phone = #{record.phone,jdbcType=VARCHAR},
      </if>
      <if test="record.khdate != null">
        khdate = #{record.khdate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.marginset != null">
        marginset = #{record.marginset,jdbcType=VARCHAR},
      </if>
      <if test="record.feeset != null">
        feeset = #{record.feeset,jdbcType=VARCHAR},
      </if>
      <if test="record.riskset != null">
        riskset = #{record.riskset,jdbcType=INTEGER},
      </if>
      <if test="record.openright != null">
        openright = #{record.openright,jdbcType=INTEGER},
      </if>
      <if test="record.accounttype != null">
        accounttype = #{record.accounttype,jdbcType=INTEGER},
      </if>
      <if test="record.qq != null">
        qq = #{record.qq,jdbcType=VARCHAR},
      </if>
      <if test="record.mail != null">
        mail = #{record.mail,jdbcType=VARCHAR},
      </if>
      <if test="record.initmoney != null">
        initmoney = #{record.initmoney,jdbcType=DECIMAL},
      </if>
      <if test="record.address != null">
        address = #{record.address,jdbcType=VARCHAR},
      </if>
      <if test="record.note != null">
        note = #{record.note,jdbcType=VARCHAR},
      </if>
      <if test="record.bz != null">
        bz = #{record.bz,jdbcType=VARCHAR},
      </if>
      <if test="record.userid != null">
        userid = #{record.userid,jdbcType=NUMERIC},
      </if>
      <if test="record.headpicture != null">
        headPicture = #{record.headpicture,jdbcType=VARCHAR},
      </if>
      <if test="record.loginname != null">
        loginname = #{record.loginname,jdbcType=VARCHAR},
      </if>
      <if test="record.notetel != null">
        notetel = #{record.notetel,jdbcType=VARCHAR},
      </if>
      <if test="record.risktype != null">
        risktype = #{record.risktype,jdbcType=INTEGER},
      </if>
      <if test="record.accountpattern != null">
        accountpattern = #{record.accountpattern,jdbcType=INTEGER},
      </if>
      <if test="record.zijinaccount != null">
        zijinaccount = #{record.zijinaccount,jdbcType=INTEGER},
      </if>
      <if test="record.jypz != null">
        jypz = #{record.jypz,jdbcType=VARCHAR},
      </if>
      <if test="record.bdtd != null">
        bdtd = #{record.bdtd,jdbcType=VARCHAR},
      </if>
      <if test="record.bzj != null">
        bzj = #{record.bzj,jdbcType=DECIMAL},
      </if>
      <if test="record.rzj != null">
        rzj = #{record.rzj,jdbcType=DECIMAL},
      </if>
      <if test="record.yjx != null">
        yjx = #{record.yjx,jdbcType=DECIMAL},
      </if>
      <if test="record.pcx != null">
        pcx = #{record.pcx,jdbcType=DECIMAL},
      </if>
      <if test="record.xzj != null">
        xzj = #{record.xzj,jdbcType=DECIMAL},
      </if>
      <if test="record.ccbl != null">
        ccbl = #{record.ccbl,jdbcType=INTEGER},
      </if>
      <if test="record.isadmin != null">
        isadmin = #{record.isadmin,jdbcType=INTEGER},
      </if>
      <if test="record.jyright != null">
        jyright = #{record.jyright,jdbcType=VARCHAR},
      </if>
      <if test="record.riskstate != null">
        riskstate = #{record.riskstate,jdbcType=INTEGER},
      </if>
      <if test="record.mncj != null">
        mncj = #{record.mncj,jdbcType=INTEGER},
      </if>
      <if test="record.riskholderid != null">
        riskHolderId = #{record.riskholderid,jdbcType=VARCHAR},
      </if>
      <if test="record.totalDefer != null">
        total_defer = #{record.totalDefer,jdbcType=NUMERIC},
      </if>
      <if test="record.fundbalance != null">
        fundBalance = #{record.fundbalance,jdbcType=NUMERIC},
      </if>
      <if test="record.zhstate != null">
        zhstate = #{record.zhstate,jdbcType=INTEGER},
      </if>
      <if test="record.allocbroker != null">
        allocbroker = #{record.allocbroker,jdbcType=VARCHAR},
      </if>
      <if test="record.allocagent != null">
        allocagent = #{record.allocagent,jdbcType=VARCHAR},
      </if>
      <if test="record.allocchannel != null">
        allocchannel = #{record.allocchannel,jdbcType=VARCHAR},
      </if>
      <if test="record.allocpt != null">
        allocpt = #{record.allocpt,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    update subzh
    set subzh = #{record.subzh,jdbcType=VARCHAR},
      cookie = #{record.cookie,jdbcType=VARCHAR},
      password = #{record.password,jdbcType=VARCHAR},
      name = #{record.name,jdbcType=VARCHAR},
      is_delete = #{record.isDelete,jdbcType=INTEGER},
      phone = #{record.phone,jdbcType=VARCHAR},
      khdate = #{record.khdate,jdbcType=TIMESTAMP},
      marginset = #{record.marginset,jdbcType=VARCHAR},
      feeset = #{record.feeset,jdbcType=VARCHAR},
      riskset = #{record.riskset,jdbcType=INTEGER},
      openright = #{record.openright,jdbcType=INTEGER},
      accounttype = #{record.accounttype,jdbcType=INTEGER},
      qq = #{record.qq,jdbcType=VARCHAR},
      mail = #{record.mail,jdbcType=VARCHAR},
      initmoney = #{record.initmoney,jdbcType=DECIMAL},
      address = #{record.address,jdbcType=VARCHAR},
      note = #{record.note,jdbcType=VARCHAR},
      bz = #{record.bz,jdbcType=VARCHAR},
      userid = #{record.userid,jdbcType=NUMERIC},
      headPicture = #{record.headpicture,jdbcType=VARCHAR},
      loginname = #{record.loginname,jdbcType=VARCHAR},
      notetel = #{record.notetel,jdbcType=VARCHAR},
      risktype = #{record.risktype,jdbcType=INTEGER},
      accountpattern = #{record.accountpattern,jdbcType=INTEGER},
      zijinaccount = #{record.zijinaccount,jdbcType=INTEGER},
      jypz = #{record.jypz,jdbcType=VARCHAR},
      bdtd = #{record.bdtd,jdbcType=VARCHAR},
      bzj = #{record.bzj,jdbcType=DECIMAL},
      rzj = #{record.rzj,jdbcType=DECIMAL},
      yjx = #{record.yjx,jdbcType=DECIMAL},
      pcx = #{record.pcx,jdbcType=DECIMAL},
      xzj = #{record.xzj,jdbcType=DECIMAL},
      ccbl = #{record.ccbl,jdbcType=INTEGER},
      isadmin = #{record.isadmin,jdbcType=INTEGER},
      jyright = #{record.jyright,jdbcType=VARCHAR},
      riskstate = #{record.riskstate,jdbcType=INTEGER},
      mncj = #{record.mncj,jdbcType=INTEGER},
      riskHolderId = #{record.riskholderid,jdbcType=VARCHAR},
      total_defer = #{record.totalDefer,jdbcType=NUMERIC},
      fundBalance = #{record.fundbalance,jdbcType=NUMERIC},
      zhstate = #{record.zhstate,jdbcType=INTEGER},
      allocbroker = #{record.allocbroker,jdbcType=VARCHAR},
      pagentzh = #{record.pagentzh,jdbcType=VARCHAR},
      allocpt = #{record.allocpt,jdbcType=VARCHAR},
      allocchannel = #{record.allocchannel,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.jcl.pojo.Subzh">
    update subzh
    <set>
      <if test="password != null">
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="isDelete != null">
        is_delete = #{isDelete,jdbcType=INTEGER},
      </if>
      <if test="phone != null">
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="khdate != null">
        khdate = #{khdate,jdbcType=TIMESTAMP},
      </if>
      <if test="marginset != null">
        marginset = #{marginset,jdbcType=VARCHAR},
      </if>
      <if test="feeset != null">
        feeset = #{feeset,jdbcType=VARCHAR},
      </if>
      <if test="riskset != null">
        riskset = #{riskset,jdbcType=INTEGER},
      </if>
      <if test="openright != null">
        openright = #{openright,jdbcType=INTEGER},
      </if>
      <if test="accounttype != null">
        accounttype = #{accounttype,jdbcType=INTEGER},
      </if>
      <if test="qq != null">
        qq = #{qq,jdbcType=VARCHAR},
      </if>
      <if test="mail != null">
        mail = #{mail,jdbcType=VARCHAR},
      </if>
      <if test="initmoney != null">
        initmoney = #{initmoney,jdbcType=DECIMAL},
      </if>
      <if test="address != null">
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="note != null">
        note = #{note,jdbcType=VARCHAR},
      </if>
      <if test="bz != null">
        bz = #{bz,jdbcType=VARCHAR},
      </if>
      <if test="userid != null">
        userid = #{userid,jdbcType=NUMERIC},
      </if>
      <if test="headpicture != null">
        headPicture = #{headpicture,jdbcType=VARCHAR},
      </if>
      <if test="loginname != null">
        loginname = #{loginname,jdbcType=VARCHAR},
      </if>
      <if test="notetel != null">
        notetel = #{notetel,jdbcType=VARCHAR},
      </if>
      <if test="risktype != null">
        risktype = #{risktype,jdbcType=INTEGER},
      </if>
      <if test="accountpattern != null">
        accountpattern = #{accountpattern,jdbcType=INTEGER},
      </if>
      <if test="zijinaccount != null">
        zijinaccount = #{zijinaccount,jdbcType=INTEGER},
      </if>
      <if test="jypz != null">
        jypz = #{jypz,jdbcType=VARCHAR},
      </if>
      <if test="bdtd != null">
        bdtd = #{bdtd,jdbcType=VARCHAR},
      </if>
      <if test="bzj != null">
        bzj = #{bzj,jdbcType=DECIMAL},
      </if>
      <if test="rzj != null">
        rzj = #{rzj,jdbcType=DECIMAL},
      </if>
      <if test="yjx != null">
        yjx = #{yjx,jdbcType=DECIMAL},
      </if>
      <if test="pcx != null">
        pcx = #{pcx,jdbcType=DECIMAL},
      </if>
      <if test="xzj != null">
        xzj = #{xzj,jdbcType=DECIMAL},
      </if>
      <if test="ccbl != null">
        ccbl = #{ccbl,jdbcType=INTEGER},
      </if>
      <if test="isadmin != null">
        isadmin = #{isadmin,jdbcType=INTEGER},
      </if>
      <if test="jyright != null">
        jyright = #{jyright,jdbcType=VARCHAR},
      </if>
      <if test="riskstate != null">
        riskstate = #{riskstate,jdbcType=INTEGER},
      </if>
      <if test="mncj != null">
        mncj = #{mncj,jdbcType=INTEGER},
      </if>
      <if test="riskholderid != null">
        riskHolderId = #{riskholderid,jdbcType=VARCHAR},
      </if>
      <if test="totalDefer != null">
        total_defer = #{totalDefer,jdbcType=NUMERIC},
      </if>
      <if test="fundbalance != null">
        fundBalance = #{fundbalance,jdbcType=NUMERIC},
      </if>
      <if test="zhstate != null">
        zhstate = #{zhstate,jdbcType=INTEGER},
      </if>
      <if test="allocbroker != null">
        allocbroker = #{allocbroker,jdbcType=VARCHAR},
      </if>
      <if test="allocagent != null">
        allocagent = #{allocagent,jdbcType=VARCHAR},
      </if>
      <if test="allocchannel != null">
        allocchannel = #{allocchannel,jdbcType=VARCHAR},
      </if>
      <if test="allocpt != null">
        allocpt = #{allocpt,jdbcType=VARCHAR},
      </if>
      <if test="manage != null">
        manage = #{manage,jdbcType=VARCHAR},
      </if>
      <if test="pagentzh != null">
        pagentzh = #{pagentzh,jdbcType=VARCHAR},
      </if>
      <if test="coefficient != null">
        coefficient = #{coefficient,jdbcType=NUMERIC},
      </if>
	  
	  <if test="bank != null">
        bank = #{bank,jdbcType=VARCHAR},
      </if>
      <if test="bankCard != null">
        bank_card = #{bankCard,jdbcType=VARCHAR},
      </if>
      <if test="idNo != null">
        id_no = #{idNo,jdbcType=VARCHAR},
      </if>
      <if test="frontPic != null">
        front_pic = #{frontPic,jdbcType=VARCHAR},
      </if>
      <if test="backPic != null">
        back_pic = #{backPic,jdbcType=VARCHAR},
      </if>
      <if test="cardPic != null">
        card_pic = #{cardPic,jdbcType=VARCHAR},
      </if>
      <if test="authState != null">
        auth_state = #{authState},
      </if>
    </set>
    where subzh = #{subzh,jdbcType=VARCHAR}
    	<if test="cookie!=null and cookie !=''">
    		and cookie = #{cookie,jdbcType=VARCHAR}
    	</if>
      
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jcl.pojo.Subzh">
    update subzh
    set 
      password = #{password,jdbcType=VARCHAR},
      name = #{name,jdbcType=VARCHAR},
      pagentzh = #{pagentzh,jdbcType=VARCHAR},
      is_delete = #{isDelete,jdbcType=INTEGER},
      phone = #{phone,jdbcType=VARCHAR},
      khdate = #{khdate,jdbcType=TIMESTAMP},
      marginset = #{marginset,jdbcType=VARCHAR},
      feeset = #{feeset,jdbcType=VARCHAR},
      riskset = #{riskset,jdbcType=INTEGER},
      openright = #{openright,jdbcType=INTEGER},
      accounttype = #{accounttype,jdbcType=INTEGER},
      qq = #{qq,jdbcType=VARCHAR},
      mail = #{mail,jdbcType=VARCHAR},
      initmoney = #{initmoney,jdbcType=DECIMAL},
      address = #{address,jdbcType=VARCHAR},
      note = #{note,jdbcType=VARCHAR},
      bz = #{bz,jdbcType=VARCHAR},
      userid = #{userid,jdbcType=NUMERIC},
      headPicture = #{headpicture,jdbcType=VARCHAR},
      loginname = #{loginname,jdbcType=VARCHAR},
      notetel = #{notetel,jdbcType=VARCHAR},
      risktype = #{risktype,jdbcType=INTEGER},
      accountpattern = #{accountpattern,jdbcType=INTEGER},
      zijinaccount = #{zijinaccount,jdbcType=INTEGER},
      jypz = #{jypz,jdbcType=VARCHAR},
      bdtd = #{bdtd,jdbcType=VARCHAR},
      bzj = #{bzj,jdbcType=DECIMAL},
      rzj = #{rzj,jdbcType=DECIMAL},
      yjx = #{yjx,jdbcType=DECIMAL},
      pcx = #{pcx,jdbcType=DECIMAL},
      xzj = #{xzj,jdbcType=DECIMAL},
      ccbl = #{ccbl,jdbcType=INTEGER},
      isadmin = #{isadmin,jdbcType=INTEGER},
      jyright = #{jyright,jdbcType=VARCHAR},
      riskstate = #{riskstate,jdbcType=INTEGER},
      mncj = #{mncj,jdbcType=INTEGER},
      riskHolderId = #{riskholderid,jdbcType=VARCHAR},
      total_defer = #{totalDefer,jdbcType=NUMERIC},
      fundBalance = #{fundbalance,jdbcType=NUMERIC},
      zhstate = #{zhstate,jdbcType=INTEGER},
      allocbroker = #{allocbroker,jdbcType=VARCHAR},
      allocchannel = #{allocchannel,jdbcType=VARCHAR}
    where subzh = #{subzh,jdbcType=VARCHAR}
      <if test="cookie!=null and cookie !=''">
    		and cookie = #{cookie,jdbcType=VARCHAR}
    	</if>
  </update>
 
  <select id="selectByPrimaryKeySubzh" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from Subzh
    <where>
		1 = 1
		<if test="subzhName != null"> AND subzh = #{subzhName} </if>
	</where>
  </select>
  <delete id="deleteByPrimaryKeySubzh">
    delete from Subzh
    <where>
		1 = 1
		<if test="subzhName != null"> AND subzh = #{subzhName} </if>
	</where>
  </delete>
  
  <select id="isExist" resultMap="BaseResultMap" >
	select * from Subzh 
	<where>
		1 = 1
		<if test="subzhName != null"> AND subzh = #{subzhName} </if>
	</where>
  </select>
  <select id="selectByInviteCode" resultMap="BaseResultMap" >
	select * from Subzh 
	<where>
		 AND invite_code = #{inviteCode}
	</where>
  </select>
  
  <insert id="insertSubzhObjectSelective">
    insert into subzh
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="subzh != null">
        subzh,
      </if>
      <if test="cookie != null">
        cookie,
      </if>
      <if test="password != null">
        password,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="pagentzh != null">
        pagentzh,
      </if>
      <if test="isDelete != null">
        is_delete,
      </if>
      <if test="phone != null">
        phone,
      </if>
      <if test="khdate != null">
        khdate,
      </if>
      <if test="marginset != null">
        marginset,
      </if>
      <if test="feeset != null">
        feeset,
      </if>
      <if test="riskset != null">
        riskset,
      </if>
      <if test="openright != null">
        openright,
      </if>
      <if test="accounttype != null">
        accounttype,
      </if>
      <if test="qq != null">
        qq,
      </if>
      <if test="mail != null">
        mail,
      </if>
      <if test="initmoney != null">
        initmoney,
      </if>
      <if test="address != null">
        address,
      </if>
      <if test="note != null">
        note,
      </if>
      <if test="bz != null">
        bz,
      </if>
      <if test="userid != null">
        userid,
      </if>
      <if test="headpicture != null">
        headPicture,
      </if>
      <if test="loginname != null">
        loginname,
      </if>
      <if test="notetel != null">
        notetel,
      </if>
      <if test="risktype != null">
        risktype,
      </if>
      <if test="accountpattern != null">
        accountpattern,
      </if>
      <if test="zijinaccount != null">
        zijinaccount,
      </if>
      <if test="jypz != null">
        jypz,
      </if>
      <if test="bdtd != null">
        bdtd,
      </if>
      <if test="bzj != null">
        bzj,
      </if>
      <if test="rzj != null">
        rzj,
      </if>
      <if test="yjx != null">
        yjx,
      </if>
      <if test="pcx != null">
        pcx,
      </if>
      <if test="xzj != null">
        xzj,
      </if>
      <if test="ccbl != null">
        ccbl,
      </if>
      <if test="isadmin != null">
        isadmin,
      </if>
      <if test="jyright != null">
        jyright,
      </if>
      <if test="riskstate != null">
        riskstate,
      </if>
      <if test="mncj != null">
        mncj,
      </if>
      <if test="riskholderid != null">
        riskHolderId,
      </if>
      <if test="totalDefer != null">
        total_defer,
      </if>
      <if test="fundbalance != null">
        fundBalance,
      </if>
      <if test="zhstate != null">
        zhstate,
      </if>
      <if test="allocbroker != null">
        allocbroker,
      </if>
       <if test="allocagent != null">
        allocagent,
      </if>
      <if test="allocchannel != null">
        allocchannel,
      </if>
      <if test="allocpt != null">
        allocpt,
      </if>
      <if test="manage != null">
        manage,
      </if>
      <if test="coefficient != null">
        coefficient,
      </if>
      
      <if test="bank != null">
        bank,
      </if>
      <if test="bankCard != null">
        bank_card,
      </if>
      <if test="idNo != null">
        id_no,
      </if>
      <if test="frontPic != null">
        front_pic,
      </if>
      <if test="backPic != null">
        back_pic,
      </if>
      <if test="cardPic != null">
        card_pic,
      </if>
      <if test="authState != null">
        auth_state,
      </if>
      <if test="inviteCode != null">
        invite_code,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="subzh != null">
        #{subzh,jdbcType=VARCHAR},
      </if>
      <if test="cookie != null">
        #{cookie,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="pagentzh != null">
        #{pagentzh,jdbcType=VARCHAR},
      </if>
      <if test="isDelete != null">
        #{isDelete,jdbcType=INTEGER},
      </if>
      <if test="phone != null">
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="khdate != null">
        #{khdate,jdbcType=TIMESTAMP},
      </if>
      <if test="marginset != null">
        #{marginset,jdbcType=VARCHAR},
      </if>
      <if test="feeset != null">
        #{feeset,jdbcType=VARCHAR},
      </if>
      <if test="riskset != null">
        #{riskset,jdbcType=INTEGER},
      </if>
      <if test="openright != null">
        #{openright,jdbcType=INTEGER},
      </if>
      <if test="accounttype != null">
        #{accounttype,jdbcType=INTEGER},
      </if>
      <if test="qq != null">
        #{qq,jdbcType=VARCHAR},
      </if>
      <if test="mail != null">
        #{mail,jdbcType=VARCHAR},
      </if>
      <if test="initmoney != null">
        #{initmoney,jdbcType=DECIMAL},
      </if>
      <if test="address != null">
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="note != null">
        #{note,jdbcType=VARCHAR},
      </if>
      <if test="bz != null">
        #{bz,jdbcType=VARCHAR},
      </if>
      <if test="userid != null">
        #{userid,jdbcType=NUMERIC},
      </if>
      <if test="headpicture != null">
        #{headpicture,jdbcType=VARCHAR},
      </if>
      <if test="loginname != null">
        #{loginname,jdbcType=VARCHAR},
      </if>
      <if test="notetel != null">
        #{notetel,jdbcType=VARCHAR},
      </if>
      <if test="risktype != null">
        #{risktype,jdbcType=INTEGER},
      </if>
      <if test="accountpattern != null">
        #{accountpattern,jdbcType=INTEGER},
      </if>
      <if test="zijinaccount != null">
        #{zijinaccount,jdbcType=INTEGER},
      </if>
      <if test="jypz != null">
        #{jypz,jdbcType=VARCHAR},
      </if>
      <if test="bdtd != null">
        #{bdtd,jdbcType=VARCHAR},
      </if>
      <if test="bzj != null">
        #{bzj,jdbcType=DECIMAL},
      </if>
      <if test="rzj != null">
        #{rzj,jdbcType=DECIMAL},
      </if>
      <if test="yjx != null">
        #{yjx,jdbcType=DECIMAL},
      </if>
      <if test="pcx != null">
        #{pcx,jdbcType=DECIMAL},
      </if>
      <if test="xzj != null">
        #{xzj,jdbcType=DECIMAL},
      </if>
      <if test="ccbl != null">
        #{ccbl,jdbcType=INTEGER},
      </if>
      <if test="isadmin != null">
        #{isadmin,jdbcType=INTEGER},
      </if>
      <if test="jyright != null">
        #{jyright,jdbcType=VARCHAR},
      </if>
      <if test="riskstate != null">
        #{riskstate,jdbcType=INTEGER},
      </if>
      <if test="mncj != null">
        #{mncj,jdbcType=INTEGER},
      </if>
      <if test="riskholderid != null">
        #{riskholderid,jdbcType=VARCHAR},
      </if>
      <if test="totalDefer != null">
        #{totalDefer,jdbcType=NUMERIC},
      </if>
      <if test="fundbalance != null">
        #{fundbalance,jdbcType=NUMERIC},
      </if>
      <if test="zhstate != null">
        #{zhstate,jdbcType=INTEGER},
      </if>
      <if test="allocbroker != null">
        #{allocbroker,jdbcType=VARCHAR},
      </if>
       <if test="allocagent != null">
        #{allocagent,jdbcType=VARCHAR},
      </if>
      <if test="allocchannel != null">
        #{allocchannel,jdbcType=VARCHAR},
      </if>
      <if test="allocpt != null">
        #{allocpt,jdbcType=VARCHAR},
      </if>
      <if test="manage != null">
        #{manage,jdbcType=VARCHAR},
      </if>
      <if test="coefficient != null">
        #{coefficient,jdbcType=NUMERIC},
      </if>
      
      <if test="bank != null">
        #{bank},
      </if>
      <if test="bankCard != null">
        #{bankCard},
      </if>
      <if test="idNo != null">
        #{idNo},
      </if>
      <if test="frontPic != null">
        #{frontPic},
      </if>
      <if test="backPic != null">
        #{backPic},
      </if>
      <if test="cardPic != null">
        #{cardPic},
      </if>
      <if test="authState != null">
        #{authState},
      </if>
      <if test="inviteCode != null">
        #{inviteCode},
      </if>
    </trim>
  </insert>
  
  <!-- int updateSubzhObjectByPrimaryKeySelective(SubzhObject record); -->
  <update id="updateSubzhObjectByPrimaryKeySelective">
    update subzh
    <set>
      <if test="password != null">
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="isDelete != null">
        is_delete = #{isDelete,jdbcType=INTEGER},
      </if>
      <if test="phone != null">
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="khdate != null">
        khdate = #{khdate,jdbcType=TIMESTAMP},
      </if>
      <if test="marginset != null">
        marginset = #{marginset,jdbcType=VARCHAR},
      </if>
      <if test="feeset != null">
        feeset = #{feeset,jdbcType=VARCHAR},
      </if>
      <if test="riskset != null">
        riskset = #{riskset,jdbcType=INTEGER},
      </if>
      <if test="openright != null">
        openright = #{openright,jdbcType=INTEGER},
      </if>
      <if test="accounttype != null">
        accounttype = #{accounttype,jdbcType=INTEGER},
      </if>
      <if test="qq != null">
        qq = #{qq,jdbcType=VARCHAR},
      </if>
      <if test="mail != null">
        mail = #{mail,jdbcType=VARCHAR},
      </if>
      <if test="initmoney != null">
        initmoney = #{initmoney,jdbcType=DECIMAL},
      </if>
      <if test="address != null">
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="note != null">
        note = #{note,jdbcType=VARCHAR},
      </if>
      <if test="bz != null">
        bz = #{bz,jdbcType=VARCHAR},
      </if>
      <if test="userid != null">
        userid = #{userid,jdbcType=NUMERIC},
      </if>
      <if test="headpicture != null">
        headPicture = #{headpicture,jdbcType=VARCHAR},
      </if>
      <if test="loginname != null">
        loginname = #{loginname,jdbcType=VARCHAR},
      </if>
      <if test="notetel != null">
        notetel = #{notetel,jdbcType=VARCHAR},
      </if>
      <if test="risktype != null">
        risktype = #{risktype,jdbcType=INTEGER},
      </if>
      <if test="accountpattern != null">
        accountpattern = #{accountpattern,jdbcType=INTEGER},
      </if>
      <if test="zijinaccount != null">
        zijinaccount = #{zijinaccount,jdbcType=INTEGER},
      </if>
      <if test="jypz != null">
        jypz = #{jypz,jdbcType=VARCHAR},
      </if>
      <if test="bdtd != null">
        bdtd = #{bdtd,jdbcType=VARCHAR},
      </if>
      <if test="bzj != null">
        bzj = #{bzj,jdbcType=DECIMAL},
      </if>
      <if test="rzj != null">
        rzj = #{rzj,jdbcType=DECIMAL},
      </if>
      <if test="yjx != null">
        yjx = #{yjx,jdbcType=DECIMAL},
      </if>
      <if test="pcx != null">
        pcx = #{pcx,jdbcType=DECIMAL},
      </if>
      <if test="xzj != null">
        xzj = #{xzj,jdbcType=DECIMAL},
      </if>
      <if test="ccbl != null">
        ccbl = #{ccbl,jdbcType=INTEGER},
      </if>
      <if test="isadmin != null">
        isadmin = #{isadmin,jdbcType=INTEGER},
      </if>
      <if test="jyright != null">
        jyright = #{jyright,jdbcType=VARCHAR},
      </if>
      <if test="riskstate != null">
        riskstate = #{riskstate,jdbcType=INTEGER},
      </if>
      <if test="mncj != null">
        mncj = #{mncj,jdbcType=INTEGER},
      </if>
      <if test="riskholderid != null">
        riskHolderId = #{riskholderid,jdbcType=VARCHAR},
      </if>
      <if test="totalDefer != null">
        total_defer = #{totalDefer,jdbcType=NUMERIC},
      </if>
      <if test="fundbalance != null">
        fundBalance = #{fundbalance,jdbcType=NUMERIC},
      </if>
      <if test="zhstate != null">
        zhstate = #{zhstate,jdbcType=INTEGER},
      </if>
      <if test="allocbroker != null">
        allocbroker = #{allocbroker,jdbcType=VARCHAR},
      </if>
      <if test="allocagent != null">
        allocagent = #{allocagent,jdbcType=VARCHAR},
      </if>
      <if test="allocchannel != null">
        allocchannel = #{allocchannel,jdbcType=VARCHAR},
      </if>
      <if test="allocpt != null">
        allocpt = #{allocpt,jdbcType=VARCHAR},
      </if>
      <if test="manage != null">
        manage = #{manage,jdbcType=VARCHAR},
      </if>
      <if test="pagentzh != null">
        pagentzh = #{pagentzh,jdbcType=VARCHAR},
      </if>
      <if test="coefficient != null">
        coefficient = #{coefficient,jdbcType=NUMERIC},
      </if>
	  
    </set>
    where subzh = #{subzh,jdbcType=VARCHAR}
    	<if test="cookie!=null and cookie !=''">
    		and cookie = #{cookie,jdbcType=VARCHAR}
    	</if>
      
  </update>
</mapper>